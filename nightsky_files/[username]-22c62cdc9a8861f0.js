(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6293],{10796:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/[username]",function(){return l(77154)}])},88649:function(e,t,l){"use strict";l.d(t,{e:function(){return y},_:function(){return g}});var s=l(85893),n=l(47340),i=l(47476),r=l(70154),a=l(48228),o=l(10787);let c=e=>{let{followTargetId:t,followDispatcherId:l,options:s}=e;return(0,a.D)({...s,mutationFn:()=>(0,o.ZN)(t),mutationKey:["follow",t,l]})},d=e=>{let{unfollowTargetId:t,unfollowDispatcherId:l,options:s}=e;return(0,a.D)({...s,mutationFn:()=>(0,o.fv)(t),mutationKey:["unfollow",t,l]})};var u=l(36492);let m=async e=>{let t=await fetch("/api/user/".concat(e,"/isFollowed"),{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return t.json()},f=["isFollowed"],h=e=>{let{followDispatcherId:t,followTargetId:l,options:s}=e;return(0,u.a)([...f,t,l],()=>m(l),{...s,staleTime:1/0})};var x=l(94991),p=l(16841),v=l(85945),j=l(67294);let g=e=>{let{isLoggedOut:t,onClick:l,children:i,...r}=e,{setIsLogInModalOpen:a}=(0,p.l9)(),o=(0,j.useCallback)(async()=>{t&&a(!0),l&&await l()},[t,l,a]);return(0,s.jsx)(n.Z,{size:"small",onClick:o,...r,children:(0,s.jsx)("span",{className:"flex gap-x-2 items-center font-bold",children:i||"Follow"})})},w=e=>{e.invalidateQueries({predicate:e=>e.queryKey[0]===r.Db[0]&&e.queryKey.includes(i.Of.following.value)})},y=e=>{let{followDispatcherId:t,followTargetId:l,onFollow:n,onUnfollow:i,initialData:r,...a}=e,o=(0,v.NL)(),u=(0,j.useCallback)(()=>{o.refetchQueries({queryKey:[...f,t,l]}),w(o)},[t,l,o]),m=(0,x.d$)(),p=c({followTargetId:l,followDispatcherId:t,options:{onSuccess:u,onError:()=>{m("Couldn't follow user","error")}}}),y=d({unfollowTargetId:l,unfollowDispatcherId:t,options:{onSuccess:u,onError:()=>{m("Couldn't unfollow user","error")}}}),{data:b,isLoading:N,isRefetching:C}=h({followDispatcherId:t,followTargetId:l,options:{initialData:r}}),k=(null==b?void 0:b.isFollowed)?"Following":"Follow",T=(null==b?void 0:b.isFollowed)?"tertiary-active":"primary",Z=N||C,P=(0,j.useCallback)(async()=>{(null==b?void 0:b.isFollowed)?(await y.mutateAsync(),null==i||i()):(await p.mutateAsync(),null==n||n())},[null==b?void 0:b.isFollowed,p,n,i,y]);return(0,s.jsx)(g,{disabled:Z||!t||!l,isLoading:Z,variant:T,onClick:P,...a,children:k})}},23695:function(e,t,l){"use strict";l.d(t,{$:function(){return v}});var s=l(85893),n=l(99461),i=l(12596),r=l(85335),a=l(86010),o=l(25675),c=l.n(o),d=l(41664),u=l.n(d),m=l(67294),f=l(4886),h=l(59456),x=l(49178),p=l(70927);function v(e){let{title:t,accentColor:l,images:o,mainImageSrc:d="",size:v="md",skeleton:j=!1,user:g,service:w,model:y,numberOfStyles:b}=e,{isLoading:N}=(0,h.u)([d]),C=m.useMemo(()=>{let e=o&&o.length>=4&&o.every(e=>(0,x.H)(e));return e?o.slice(0,4):[,,,,].fill(null)},[o]),k=m.useMemo(()=>{switch(w){case"Stable Diffusion":default:return{name:w,image:i.hz};case"DALL\xb7E":return{name:w,image:i.r7}}},[w]);return j?(0,s.jsx)(p.Z,{className:"rounded-md p-4 w-full",children:(0,s.jsxs)("div",{className:"min-w-full max-w-md rounded-md",children:[(0,s.jsx)("div",{className:"relative group w-full overflow-hidden rounded-lg mb-4",children:(0,s.jsx)("div",{className:"aspect-[3/4] w-full relative",children:(0,s.jsx)("div",{className:"absolute w-full h-full z-10 bg-primary/10"})})}),(0,s.jsxs)("div",{className:"space-y-3 w-full flex flex-col pb-3",children:[(0,s.jsx)("div",{className:"h-3 w-3/5 rounded-lg bg-primary/10"}),(0,s.jsx)("div",{className:"h-3 w-4/5 rounded-lg bg-primary/20"}),(0,s.jsx)("div",{className:"h-3 w-2/5 rounded-lg bg-primary/20"})]})]})}):(console.log("Model received in Spotlight:",y),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:(0,a.Z)("bg-muted hover:bg-secondary p-3 rounded-lg",{"pb-6 ":"md"===v,"pb-3":"xs"===v||"sm"===v}),children:[(0,s.jsxs)("div",{className:(0,a.Z)("relative group w-full overflow-hidden",{"rounded-lg mb-4":"md"===v,"rounded-lg mb-2":"xs"===v||"sm"===v}),children:[(0,s.jsxs)("div",{className:"aspect-square w-full relative overflow-hidden",children:[(0,s.jsx)("div",{className:(0,a.Z)("absolute w-full h-full z-10",{"":"md"===v,hidden:"xs"===v||"sm"===v}),style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 50%, ".concat(l," 100%)")}}),N?(0,s.jsx)("div",{className:(0,a.Z)("flex w-full h-full rounded-t-md items-center justify-center",{"text-left":"md"===v,"":"xs"===v||"sm"===v}),style:{background:l},children:(0,s.jsx)(f.Z,{name:"loadingSpinner",className:"animate-spin",size:36,color:"white"})}):(0,s.jsx)(c(),{unoptimized:!0,src:(0,r.m)(d,500),className:(0,a.Z)("bg-foreground/5 w-full h-full object-cover group-hover:scale-105 transform transition duration-500",{"":"md"===v,"text-left":"xs"===v||"sm"===v}),alt:t,fill:!0,quality:100})]}),(0,s.jsx)("div",{className:(0,a.Z)("text-center",{"px-4 lg:px-6 pb-5 lg:pb-7":"md"===v,"px-4":"xs"===v||"sm"===v}),style:{background:l},children:o&&(0,s.jsx)("div",{className:(0,a.Z)("flex items-center m-auto max-w-xs",{"gap-2 mb-0 md:mb-0":"md"===v,"gap-1 mb-0":"xs"===v||"sm"===v}),children:C.map((e,l)=>(0,x.H)(e)?(0,s.jsx)("div",{className:"aspect-square w-full relative",children:(0,s.jsx)(c(),{unoptimized:!0,src:(0,r.m)(e,100),className:(0,a.Z)("w-full h-full object-cover",{"rounded-md":"md"===v,"rounded-[4px]":"xs"===v||"sm"===v}),alt:t,layout:"fill"})},l):(0,s.jsx)("div",{className:(0,a.Z)("aspect-square w-full bg-white/10",{"rounded-md":"md"===v,"rounded-[4px]":"xs"===v||"sm"===v})},l))})})]}),(0,s.jsxs)("div",{className:"text-foreground flex-col items-start px-0 flex gap-y-1",children:[(0,s.jsx)("p",{className:(0,a.Z)("w-full text-left text-sm hover:opacity-100 truncate font-semibold",{"text-sm lg:text-base text-left mb-[2px] pr-4":"md"===v,"text-center text-xs px-2":"xs"===v||"sm"===v}),children:t||"Untitled"}),(0,s.jsxs)("div",{className:(0,a.Z)("text-left flex flex-col gap-y-1 text-xs items-center font-normal w-full",{"text-left":"md"===v,"":"xs"===v||"sm"===v}),children:[w&&(0,s.jsxs)("div",{className:(0,a.Z)("flex gap-0 justify-center items-center rounded-md z-50 w-full",{"text-xs":"md"===v,"":"xs"===v||"sm"===v}),children:[(0,s.jsx)(n.Z,{width:v,height:v,seed:k.name||"seed",image:k.image||"none",className:"invisible ring-inset w-0 h-0 md:w-0 md:h-0 ring-1 ring-opacity-10 ring-white shadow-[0_0_0_1px_rgba(0,0,0,0.1)]"}),(0,s.jsx)("span",{className:"opacity-60 truncate w-full",children:y})]}),g&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u(),{href:"/user/".concat(null==g?void 0:g.id),className:"w-full",children:(0,s.jsxs)("div",{className:(0,a.Z)("opacity-60 truncate w-full",{"":"md"===v,"invisible hidden":"xs"===v||"sm"===v}),children:["by ","@"+g.username]})})}),b&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:(0,a.Z)("text-left flex w-full items-center font-normal opacity-60 truncate",{"text-xs":"md"===v,"":"xs"===v||"sm"===v}),children:[b," styles"]})})]})]})]})}))}},26107:function(e,t,l){"use strict";l.d(t,{_v:function(){return x},aJ:function(){return h},u:function(){return f}});var s=l(85893),n=l(67294),i=l(76530),r=l(37899),a=l(63679),o=l(88301),c=l(65820),d=l(63387);let u=n.createContext(null),m=()=>{let e=n.useContext(u);if(null==e)throw Error("Tooltip components must be wrapped in <Tooltip />");return e};function f(e){let{children:t,...l}=e,i=function(){let{initialOpen:e=!1,placement:t="top",defaultOffset:l,open:s,onOpenChange:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[c,d]=n.useState(e),u={mainAxis:5,crossAxis:0,...l},m=null!=s?s:c,f=null!=i?i:d,h=(0,r.YF)({placement:t,open:m,onOpenChange:f,whileElementsMounted:a.Me,middleware:[(0,o.cv)(u),(0,a.RR)(),(0,a.uY)()]}),x=h.context,p=(0,r.XI)(x,{move:!1,enabled:null==s,handleClose:(0,r.xp)()}),v=(0,r.KK)(x,{enabled:null==s}),j=(0,r.bQ)(x),g=(0,r.qs)(x,{role:"tooltip"}),w=(0,r.NI)([p,v,j,g]);return n.useMemo(()=>({open:m,setOpen:f,...w,...h}),[m,f,w,h])}(l);return(0,s.jsx)(u.Provider,{value:i,children:t})}let h=n.forwardRef(function(e,t){let{children:l,asChild:r=!1,...a}=e,o=m(),c=null==l?void 0:l.ref,d=n.useMemo(()=>(0,i.l)([o.reference,t,c]),[o.reference,t,c]);return r&&n.isValidElement(l)?n.cloneElement(l,o.getReferenceProps({ref:d,...a,...l.props,"data-state":o.open?"open":"closed"})):(0,s.jsx)("div",{ref:d,"data-state":o.open?"open":"closed",...o.getReferenceProps(a),children:l})}),x=n.forwardRef(function(e,t){var l,a,o,u;let f=m(),h=n.useMemo(()=>(0,i.l)([f.floating,t]),[f.floating,t]),{className:x,...p}=f.getFloatingProps(e);return(0,s.jsx)(r.ll,{children:(0,s.jsx)(c.M,{children:f.open&&(0,s.jsx)(d.E.div,{ref:h,className:x||"px-6 py-4 bg-popover text-popover-foreground font-medium rounded-lg border-border border shadow-[0_3px_10px_rgb(0,0,0,0.2)]",initial:{opacity:0,scale:1},animate:{opacity:1,scale:1,transition:{duration:.5,delay:0}},exit:{opacity:0,scale:1},style:{position:f.strategy,top:f.y&&(null==e?void 0:null===(l=e.insets)||void 0===l?void 0:l.top)?f.y+(null==e?void 0:null===(a=e.insets)||void 0===a?void 0:a.top):f.y?f.y:0,left:f.x&&(null==e?void 0:null===(o=e.insets)||void 0===o?void 0:o.left)?f.x+(null==e?void 0:null===(u=e.insets)||void 0===u?void 0:u.left):f.x?f.x:0,visibility:null==f.x?"hidden":"visible",zIndex:9999,...e.style},...p})})})})},10787:function(e,t,l){"use strict";l.d(t,{ET:function(){return r},ZN:function(){return n},fv:function(){return i}});var s=l(24092);let n=async e=>{let t="".concat((0,s.f)(),"/follower/follow"),l=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({followTargetId:e})});return l.json()},i=async e=>{let t="".concat((0,s.f)(),"/follower/unfollow"),l=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({unfollowTargetId:e})});return l.json()},r=async e=>{let{requestType:t,userId:l,nextPage:n}=e,i="?"+["type=".concat(t),"userId=".concat(l)].join("&"),r="".concat((0,s.f)(),"/followers").concat(n||i),a=await fetch(r,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return a.json()}},43552:function(e,t,l){"use strict";l.d(t,{Wh:function(){return o},ZP:function(){return n},_v:function(){return a},bl:function(){return r},fR:function(){return m},jG:function(){return c},p8:function(){return i},wF:function(){return u},xz:function(){return d}});let s=()=>"/api";async function n(e){let t="".concat(s(),"/theme/").concat(e),l=await fetch(t,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return l.json()}async function i(e){let t=e.join("&id="),l="".concat(s(),"/theme/getByIds?id=").concat(t),n=await fetch(l,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return n.json()}async function r(e){let t="".concat(s(),"/theme/getByCategory?category=").concat(e),l=await fetch(t,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return l.json()}async function a(e,t,l,n){let i="?filter=".concat(t);l&&(i+="&query=".concat(l)),n&&(i+="&page=".concat(n));let r="".concat(s(),"/user/").concat(e,"/themes").concat(i),a=await fetch(r,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return a.json()}async function o(e,t,l,n,i,r){let a="?page=".concat(t||1);e&&(a+="&query=".concat(e)),l&&(a+="&onlyOwn=true"),n&&(a+="&service=".concat(n)),i&&(a+="&category=".concat(i)),r&&(a+="&liked=true");let o="".concat(s(),"/themes").concat(a),c=await fetch(o,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return c.json()}async function c(e){let t="".concat(s(),"/theme"),l=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return l.json()}async function d(e){let t="".concat(s(),"/theme/").concat(e.id),l=await fetch(t,{credentials:"include",method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return l.json()}async function u(e){let t="".concat(s(),"/theme/").concat(e.id,"/reassign"),l=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username})});return l.json()}async function m(e){let t="".concat(s(),"/theme/").concat(e),l=await fetch(t,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}});return l.json()}},83022:function(e,t,l){"use strict";l.d(t,{GX:function(){return u},Wg:function(){return c},b:function(){return a},se:function(){return d},tT:function(){return o}});var s=l(76172),n=l(59403),i=l(48228),r=l(43552);let a=(e,t,l)=>{let s=t||"all";return(0,n.N)(["themes",s,e,l],t=>{let{pageParam:n}=t;return(0,r._v)(e||"",s,l,n)},{staleTime:3e5,getNextPageParam:(e,t)=>20===e.length?t.length+1:void 0,enabled:!!e})},o=()=>(0,i.D)({mutationFn:r.fR,onSuccess:()=>{s.E.refetchQueries({queryKey:["themes"]})}}),c=()=>(0,i.D)({mutationFn:r.jG,onSuccess:()=>{s.E.refetchQueries({queryKey:["themes"]})}}),d=()=>(0,i.D)({mutationFn:r.xz,onSuccess:()=>{s.E.refetchQueries({queryKey:["theme"]})}}),u=()=>(0,i.D)({mutationFn:r.wF,onSuccess:()=>{s.E.refetchQueries({queryKey:["theme"]})}})},59456:function(e,t,l){"use strict";l.d(t,{u:function(){return n}});var s=l(36492);let n=(e,t)=>(0,s.a)(["imagePreloads",e],()=>i(e),{...t,enabled:e.length>0,staleTime:1/0,retry:!1}),i=e=>{let t=e.map(e=>new Promise((t,l)=>{let s=new Image;s.src=e,s.onload=t,s.onerror=l}));return Promise.all(t)}},77154:function(e,t,l){"use strict";l.r(t),l.d(t,{PRIVATE_FILTERS:function(){return B},PRIVATE_FILTER_IDS:function(){return X},__N_SSP:function(){return J},default:function(){return Q}});var s=l(85893),n=l(67294),i=l(99461),r=l(5993),a=l(94991),o=l(47340),c=l(9328),d=l(89833);let u=["All services","DALL\xb7E","Midjourney","Stable Diffusion","Stable Diffusion XL"],m=[null,"DALL\xb7E","Midjourney","Stable Diffusion","Stable Diffusion XL"];var f=function(e){let{filters:t=u,filterIds:l=m,queryKey:i="provider",defaultFilter:r}=e,[f,h]=(0,n.useState)(!1),x=(0,a.nr)(i),p=e=>{let t=l[e];x(t),h(!1)},v=(0,a.Wd)(i)||r||l[0],j=(0,n.useMemo)(()=>{let e=l.indexOf(v);return l[-1!==e?e:0]},[v,l]);return(0,s.jsxs)("div",{className:"flex items-center justify-center w-full",children:[f&&(0,s.jsx)("div",{className:"fixed top-64 left-0 h-[calc(100% - 64px)] right-0 bg-trueGray-900 z-20",children:(0,s.jsxs)("div",{className:"flex flex-col h-full px-4",children:[(0,s.jsx)("div",{className:"flex flex-col h-full",children:t.map((e,t)=>(0,s.jsx)(o.Z,{onClick:()=>p(t),variant:v===l[t]?"primary":"ghost",size:"small","aria-current":v===l[t]?"page":void 0,children:e},e))}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(o.Z,{onClick:()=>h(!1),variant:"tertiary",size:"small",children:"Close"})})]})}),(0,s.jsx)("div",{className:"flex md:hidden w-full",children:(0,s.jsxs)(c.h_,{children:[(0,s.jsx)(c.$F,{className:"w-full",children:(0,s.jsxs)(o.Z,{as:"div",variant:"tertiary",size:"small",className:"w-full !justify-between",children:[t[l.indexOf(j)],(0,s.jsx)(d.qhg,{})]})}),(0,s.jsx)(c.AW,{children:t.map((e,t)=>(0,s.jsx)(c.Xi,{onClick:()=>p(t),className:v===l[t]?"text-accent":void 0,children:e},e))})]})}),(0,s.jsx)("div",{className:"mb-9 hidden md:flex space-x-8",children:t.map((e,t)=>(0,s.jsx)(o.Z,{onClick:()=>p(t),variant:v===l[t]?"primary":"ghost",size:"small","aria-current":v===l[t]?"page":void 0,children:e},e))})]})},h=l(95062),x=l(77378);function p(e){let{children:t,tabs:l,onTabChange:i}=e,r=(0,a.Wd)("tab")||l[0],u=(0,a.nr)("tab"),[m,f]=(0,n.useState)(!1),h=l.findIndex(e=>e===r),x=e=>{u(l[e],!0),null==i||i(e)},p=()=>{f(!m)};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("div",{className:"border-border sm:hidden",children:(0,s.jsxs)(c.h_,{children:[(0,s.jsx)(c.$F,{className:"w-full",children:(0,s.jsxs)(o.Z,{as:"div",onClick:p,variant:"tertiary",size:"small",className:"w-full !justify-between",children:[l[h],(0,s.jsx)(d.qhg,{})]})}),(0,s.jsx)(c.AW,{children:l.map((e,t)=>(0,s.jsx)(c.Xi,{onClick:()=>{x(t),p()},children:e},e))})]})}),(0,s.jsx)("div",{className:"text-left border-b border-border hidden sm:block space-x-8",children:l.map((e,t)=>(0,s.jsx)("button",{className:function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return t.filter(Boolean).join(" ")}("whitespace-nowrap border-b-2 px-1 pb-4 text-sm font-medium",h===t?"text-accent border-blue-500 active":"border-transparent text-foreground/50 hover:border-gray-500 hover:text-foreground/80"),onClick:()=>x(t),"aria-current":h===t?"page":void 0,children:e},e))}),(0,s.jsx)("div",{className:"",children:t.map((e,t)=>(0,s.jsx)("div",{hidden:t!==h,children:e},t))})]})}var v=l(22579),j=l(83022),g=l(84849),w=l(23695),y=l(41664),b=l.n(y),N=l(70984),C=l(78633),k=l(20084),T=l(16605),Z=l(26107);function P(e){let{themeId:t,isPublic:l}=e,i=(0,j.se)(),[r,a]=(0,n.useState)(l),[o,c]=(0,n.useState)(!1),d=(0,n.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),(0,k.L9)(T._.clickPublishThemeButton,{themeId:t,value:r?"private":"publish"}),r?(a(!1),i.mutate({id:t,isPublic:!1})):(a(!0),i.mutate({id:t,isPublic:!0}))},[r,t,i]);return r?(0,s.jsx)("div",{className:"absolute right-4 top-4 z-50 hidden group-hover:block",children:(0,s.jsxs)(Z.u,{children:[(0,s.jsx)(Z.aJ,{children:(0,s.jsx)("button",{className:"flex w-9 rounded-lg aspect-square items-center justify-center group-hover:bg-white",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:o?(0,s.jsx)(C.TKV,{className:"text-black",size:24}):(0,s.jsx)(C.YsK,{className:"text-black",size:24})})}),(0,s.jsx)(Z._v,{children:"Make theme private"})]})}):(0,s.jsx)("div",{className:"absolute right-4 top-4 z-50",children:(0,s.jsxs)(Z.u,{children:[(0,s.jsx)(Z.aJ,{children:(0,s.jsx)("button",{className:"flex w-9 rounded-lg aspect-square items-center justify-center group-hover:bg-white",onClick:d,children:(0,s.jsx)(C.VUr,{className:"text-foreground/75 group-hover:text-black",size:24,style:{filter:"drop-shadow(0px 0px 8px rgba(0, 0, 0, 0.5))"}})})}),(0,s.jsx)(Z._v,{children:"Publish theme"})]})})}var E=l(88649),S=l(59403),F=l(10787);let I=["followers"],_=e=>{let{requestType:t,userId:l,options:s}=e,{data:i,...r}=(0,S.N)([...I,t,l],e=>{let{pageParam:s=""}=e;return(0,F.ET)({requestType:t,nextPage:s,userId:l})},{getNextPageParam:e=>e.nextPage||"",staleTime:1/0,...s}),a=null==i?void 0:i.pages[i.pages.length-1].hasNextPage,o=(0,n.useMemo)(()=>{let e=null==i?void 0:i.pages.map(e=>e.result.map(e=>({...e})));return null==e?void 0:e.flat()},[i]);return{...r,followers:o,hasNextPage:a}};var A=l(4886),z=l(97650),M=l(30313);let D=()=>(0,s.jsx)(M.kC,{justifyContent:"center",children:(0,s.jsxs)(M.kC,{justifyContent:"space-between",alignItems:"center",gap:10,width:"100%",maxWidth:550,children:[(0,s.jsxs)("div",{className:"w-full flex items-center justify-center p-3 pl-[0.6rem]",children:[(0,s.jsx)("div",{className:"relative min-w-12 min-h-12 rounded-full items-center justify-center",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",width:40,height:40,className:"rounded-full"})}),(0,s.jsxs)("div",{className:"w-full flex flex-col items-start justify-start py-0 px-1 gap-px shrink pl-4 sm:pl-6",children:[(0,s.jsx)(g.Z,{containerClassName:"w-full flex items-center",baseColor:"#1c1c1c",className:"w-full max-w-[8rem] h-3 sm:max-w-[12rem]"}),(0,s.jsx)(g.Z,{containerClassName:"w-full flex items-center",baseColor:"#1c1c1c",className:"w-full max-w-[4rem] h-3 sm:max-w-[6rem]"})]})]}),(0,s.jsx)(E._,{isLoading:!0,disabled:!0,variant:"primary",className:"w-full max-w-[82px]"})]})}),O=e=>{let{followDispatcherId:t,follower:l}=e,{id:n,image:r,name:a,username:o,isFollowed:c}=l;return(0,s.jsx)(M.kC,{justifyContent:"center",mb:16,children:(0,s.jsx)(M.kC,{justifyContent:"space-between",alignItems:"center",gap:10,width:"100%",maxWidth:550,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"relative w-12 h-12 min-w-12 min-h-12 rounded-full overflow-hidden flex items-center justify-center",children:(0,s.jsx)(b(),{href:"/user/".concat(n),children:(0,s.jsx)(i.Z,{seed:(null!=n?n:"username").slice(-8),image:r,width:40,height:40})})}),(0,s.jsx)(b(),{href:"/user/".concat(n),children:(0,s.jsxs)("div",{className:"flex flex-col pl-2 max-w-[45vw] sm:max-w-xs",children:[(0,s.jsx)("p",{className:"text-base leading-6 font-semibold truncate",children:a}),(0,s.jsx)("span",{className:"text-muted-foreground text-xs max-w-fit leading-4 font-normal truncate",children:o})]})})]}),t!==n&&(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)(E.e,{followDispatcherId:t,followTargetId:n,initialData:{isFollowed:c}}):(0,s.jsx)(E._,{isLoggedOut:!0})})]})})})},q=()=>(0,s.jsx)(s.Fragment,{children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(D,{},t))}),L=e=>{let{requestType:t,userProfile:l}=e,{user:i,isLoading:r}=(0,a.kP)(),{followers:o,isLoading:c,isFetchingNextPage:d,hasNextPage:u,fetchNextPage:m,isError:f}=_({requestType:t,userId:l.id}),{ref:h,inView:x}=(0,z.YD)(),p=!o||!o.length,v=l.username||"this user";(0,n.useEffect)(()=>{x&&!d&&u&&m()},[m,d,x,u]);let j=(0,n.useMemo)(()=>"following"===t?{big:"Not following anyone yet",small:"It looks like ".concat(v," hasn't followed anyone yet. Check back soon!")}:{big:"No followers yet",small:"It looks like ".concat(v," doesn't have any followers yet. Check back soon!")},[t,v]);return(0,s.jsxs)(s.Fragment,{children:[!r&&(null==o?void 0:o.map(e=>(0,s.jsx)(O,{follower:e,followDispatcherId:null==i?void 0:i.id},e.id))),c||d||r?(0,s.jsx)(q,{}):p?(0,s.jsx)(N.Z,{hideGoHome:!0,bigText:j.big,smallText:j.small}):f?(0,s.jsx)(N.Z,{hideGoHome:!0,bigText:"Something went wrong"}):u?(0,s.jsx)(s.Fragment,{children:!d&&(0,s.jsx)("div",{ref:h,className:"mb-4 w-full text-center",children:(0,s.jsx)(A.Z,{name:"loadingSpinner",size:32,className:"animate-spin mx-auto"})})}):null]})};var R=l(43575),K=l(28255),G=l(23570);let V=()=>{let[e,t]=n.useState(!1),{setIsSelectionActive:l,setSelectedPrompts:i,selectedPrompts:r}=(0,v.t)(),[a,c]=n.useState(),d=(0,v.to)(),u=(0,G.n)("filter"),m=(0,K.W)("filter")||"Public",f=()=>{l(!1),i([]),c(void 0)},h=n.useMemo(()=>"private"===a?"Are you sure you want to make selected prompts private?":"public"===a?"Are you sure you want to make selected prompts public?":"archive"===a?"Are you sure you want to archive selected prompts?":"delete"===a?"Are you sure you want to delete selected prompts?":"",[a]),x=n.useMemo(()=>"private"===a?"Make Private":"public"===a?"Make Public":"archive"===a?"Archive":"delete"===a?"Delete":"",[a]),p=n.useCallback(async()=>{let e=async()=>await fetch("/api/prompt/bulkActions",{method:"POST",body:JSON.stringify({promptIds:r,action:a}),headers:{"Content-Type":"application/json"}}),s=await e();s.ok&&(t(!1),c(void 0),l(!1),d(),"private"===a?u("Private"):"public"===a?u("Public"):"archive"===a&&u("Archived"))},[a,d,r,u,l]);return(0,s.jsxs)("div",{className:"flex w-full flex-row items-start justify-between min-h-[77px] flex-wrap",children:[(0,s.jsx)(R.Z,{isOpen:e,setIsOpen:t,title:x,description:h,buttons:[{text:x,onClick:p},{text:"Cancel",onClick:()=>{t(!1),c(void 0)},variant:"tertiary"}]}),(0,s.jsx)("div",{className:"w-40"}),(0,s.jsxs)("div",{className:"flex items-start justify-start gap-4",children:["Public"!==m&&(0,s.jsx)(o.Z,{variant:"secondary",size:"small",onClick:()=>{c("public"),t(!0)},children:"Make public"}),"Private"!==m&&(0,s.jsx)(o.Z,{variant:"secondary",size:"small",onClick:()=>{c("private"),t(!0)},children:"Make private"}),"Archived"!==m&&(0,s.jsx)(o.Z,{variant:"secondary",size:"small",onClick:()=>{c("archive"),t(!0)},children:"Archive"}),(0,s.jsx)(o.Z,{className:"text-red-300",variant:"tertiary",size:"small",onClick:()=>{c("delete"),t(!0)},children:"Delete"})]}),(0,s.jsx)("div",{className:"py-4 md:py-0",children:(0,s.jsx)(o.Z,{variant:"secondary",size:"small",onClick:f,children:"Cancel"})})]})};var W=l(86010),J=!0;let B=["All","Public","Archived","Private"],X=["All","Public","Archived","Private"];function $(e){let{userId:t,userName:l,defaultFilter:i}=e,{user:r}=(0,a.kP)(),o=(0,a.Wd)("filter")||i||"",{isLoading:c,data:d,hasNextPage:u,fetchNextPage:m,isFetchingNextPage:f}=(0,j.b)(t,o.toLowerCase()),h=(0,n.useRef)(null),x=(0,n.useMemo)(()=>d?d.pages.flat():[],[d]),p=(0,n.useCallback)(()=>{if(!h.current)return;let e=h.current.getBoundingClientRect(),t=e.top>=0&&e.bottom<=window.innerHeight;t&&!f&&u&&m()},[m,u,f]);return((0,n.useEffect)(()=>(window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[p]),c)?(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})})]}):null==x||0===x.length?(0,s.jsx)(N.Z,{hideGoHome:!0,smallText:"It looks like ".concat(l||"this user"," hasn’t created any themes yet. Check back soon!"),bigText:"No themes"}):(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pb-10",children:[x.map(e=>{var t;return(0,s.jsxs)("div",{className:"relative group",children:[e.userId===(null==r?void 0:r.id)&&(0,s.jsx)(P,{themeId:e.id,isPublic:!!e.isPublic}),(0,s.jsx)(b(),{href:"/theme/".concat(e.id),children:(0,s.jsx)(w.$,{service:e.meta.service,title:e.name,mainImageSrc:e.image||"/empty-hero.png",images:e.thumbnails,accentColor:e.accentColor||"#000",numberOfStyles:null===(t=null==e?void 0:e.modifiers)||void 0===t?void 0:t.length})})]},e.id)}),f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})})]}),(0,s.jsx)("div",{ref:h})]})}let H=e=>{var t;let{userData:l}=e,{user:c,isLoading:d,isLoggedIn:u}=(0,a.kP)(),m=(0,v.to)(),[j,g]=(0,n.useState)(l.username||l.id||""),w=(0,a.d$)(),{isSelectionActive:y,selectedPrompts:b,setIsSelectionActive:N}=(0,v.t)();(0,n.useEffect)(()=>{(null==l?void 0:l.username)&&g(l.username)},[l.username]);let C=(0,n.useMemo)(()=>null!=c&&!!c.id&&c.id===(null==l?void 0:l.id),[null==c?void 0:c.id,null==l?void 0:l.id]),k=(0,n.useMemo)(()=>null!=c&&!!c.isAdmin||C,[null==c?void 0:c.isAdmin,C]),T=(0,n.useMemo)(()=>null==c?void 0:c.isAdmin,[null==c?void 0:c.isAdmin]);(0,n.useEffect)(()=>{m()},[]);let Z=k?"Public":void 0,P=(0,n.useCallback)(async()=>{if(null==l?void 0:l.id){let e=await fetch("/api/user/".concat(l.id),{method:"DELETE",headers:{"Content-Type":"application/json"}});200===e.status?w("User successfully banned"):w("Something went wrong","error")}},[null==l?void 0:l.id,w]);return l?(0,s.jsx)(h.Z,{children:(0,s.jsx)(r.Z,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[y&&(0,s.jsx)("div",{className:"fixed bottom-8 left-8 bg-blue-500 rounded p-4 z-[100] flex gap-4 items-center shadow-md",children:(0,s.jsxs)("div",{children:[b.length," prompt",1!==b.length?"s":""," selected"]})}),(0,s.jsx)("div",{className:"flex items-center gap-4 pb-6 sm:pb-0 md:pb-0",children:(0,s.jsxs)("div",{className:"w-full flex items-center gap-12 justify-between flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12",children:(0,s.jsx)(i.Z,{width:48,height:48,seed:null===(t=l.id)||void 0===t?void 0:t.slice(-8),image:l.image})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[j,T&&(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText((null==l?void 0:l.email)||""),w("Copied")},className:"text-xs text-foreground",children:null==l?void 0:l.email})]})]}),T&&(0,s.jsx)(o.Z,{variant:"tertiary",size:"small",onClick:P,children:"Ban user"}),!d&&!C&&(0,s.jsx)(s.Fragment,{children:u&&(null==c?void 0:c.id)?(0,s.jsx)(E.e,{followDispatcherId:c.id,followTargetId:l.id}):(0,s.jsx)(E._,{isLoggedOut:!0})})]})}),(0,s.jsxs)(p,{tabs:["Creations","Templates","Likes","Following","Followers"],onTabChange:()=>m(),children:[(0,s.jsxs)(s.Fragment,{children:[y?(0,s.jsx)(V,{}):(0,s.jsx)("div",{className:(0,W.Z)("flex w-full flex-col md:flex-row relative"),children:k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{filters:B,filterIds:X,queryKey:"filter",defaultFilter:Z}),(0,s.jsx)(o.Z,{variant:"tertiary",size:"small",onClick:()=>N(!0),className:"relative md:absolute right-0 my-6 md:my-0",children:"Select"})]})}),(0,s.jsx)(x.Z,{query:"",userId:l.id,creations:!0,userName:l.username||"user",defaultFilter:Z})]}),(0,s.jsxs)(s.Fragment,{children:[k&&(0,s.jsx)(f,{filters:B,filterIds:X,queryKey:"filter",defaultFilter:Z}),(0,s.jsx)($,{userId:l.id,userName:l.username,defaultFilter:Z})]}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{}),(0,s.jsx)(x.Z,{query:"",userId:l.id,likes:!0,userName:l.username||"user"})]}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(L,{requestType:"following",userProfile:{id:l.id,username:l.username}})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(L,{requestType:"followers",userProfile:{id:l.id,username:l.username}})})]})]})})}):null};var Q=H},85335:function(e,t,l){"use strict";l.d(t,{m:function(){return s}});let s=(e,t)=>e.replace("public","width=".concat(t))},97650:function(e,t,l){"use strict";let s;l.d(t,{YD:function(){return o}});var n=l(67294);let i=new Map,r=new WeakMap,a=0;function o({threshold:e,delay:t,trackVisibility:l,rootMargin:o,root:c,triggerOnce:d,skip:u,initialInView:m,fallbackInView:f,onChange:h}={}){var x;let[p,v]=n.useState(null),j=n.useRef(),[g,w]=n.useState({inView:!!m,entry:void 0});j.current=h,n.useEffect(()=>{let n;if(!u&&p)return n=function(e,t,l={},n=s){if(void 0===window.IntersectionObserver&&void 0!==n){let o=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof l.threshold?l.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}let{id:c,observer:d,elements:u}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var l;return`${t}_${"root"===t?(l=e.root)?(r.has(l)||(a+=1,r.set(l,a.toString())),r.get(l)):"0":e[t]}`}).toString(),l=i.get(t);if(!l){let s;let n=new Map,o=new IntersectionObserver(t=>{t.forEach(t=>{var l;let i=t.isIntersecting&&s.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(l=n.get(t.target))||l.forEach(e=>{e(i,t)})})},e);s=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),l={id:t,observer:o,elements:n},i.set(t,l)}return l}(l),m=u.get(e)||[];return u.has(e)||u.set(e,m),m.push(t),d.observe(e),function(){m.splice(m.indexOf(t),1),0===m.length&&(u.delete(e),d.unobserve(e)),0===u.size&&(d.disconnect(),i.delete(c))}}(p,(e,t)=>{w({inView:e,entry:t}),j.current&&j.current(e,t),t.isIntersecting&&d&&n&&(n(),n=void 0)},{root:c,rootMargin:o,threshold:e,trackVisibility:l,delay:t},f),()=>{n&&n()}},[Array.isArray(e)?e.toString():e,p,c,o,d,u,l,f,t]);let y=null==(x=g.entry)?void 0:x.target;n.useEffect(()=>{p||!y||d||u||w({inView:!!m,entry:void 0})},[p,y,d,u,m]);let b=[v,g.inView,g.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}}},function(e){e.O(0,[7909,3387,1525,9774,2888,179],function(){return e(e.s=10796)}),_N_E=e.O()}]);
//# sourceMappingURL=[username]-22c62cdc9a8861f0.js.map